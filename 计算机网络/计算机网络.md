* [计算机体系架构](#0.计算机体系架构（OSI./TCP/教材五层）)
* [TCP/IP如何实现可靠传输](#1.TCP/IP如何实现可靠传输)
* [三次握手/四次握手](#2.TCP建立可靠的连接（连接的三次握手，释放的四次握手）)
* [TCP/UDP的特点和区别](#3.TCP/UDP的特点和区别)
* [打开一个网页后会经历的事](#4.打开一个网页后会经历的事)
* [DNS查找IP过程](#5.DNS查找IP过程)
* [路由器和交换机的区别](#6.路由器和交换机的区别)

# 0.计算机体系架构（OSI./TCP/教材五层）
    1.五层详解：
        1.应用层：
            任务：通过进程见的交互来完成特定的网络应用
            协议: 定义进程间通信和交互的规则
            实例：HTTP,DNS,SMTP,POP,DHCP
            单位：报文
        2.运输层：
            任务：为进程通信提供通用发数据传输服务，应用层利用该层传输报文
            主要协议:
                TCP:传输控制协议，面向连接，可靠的，单位是报文段（面向字节流）
                UDP：用户数据报协议，无连接，尽最大努力的，单位是用户数据报
            功能：具有分用和复用的功能
                分用：运输层将信息分别交付到相应进程
                复用：多个进程可同时使用运输层服务
        3.网络层（IP协议）
            任务：为分组交换网上的不同主机提供通信服务：将运输层的数据单元封装成分组或者包进行转送；选择合适的路由进行分组转发
            单位：IP数据报（数据报）
        4.数据链路层
            任务：将IP数据报【组装成帧】，差错检测
            单位:帧
        5.物理层
            单位：bit
            任务：传输数据
    2..分层的好处
        1.各层独立|灵活|结构上可分开|易于实现|促进标准化
        2.各层的主要功能：
            1.差错控制；2.流量控制； 3.分段和重装； 4.复用和分用；5.建立连接和释放
# 1.TCP/IP如何实现可靠传输
    0. 提供可靠的字节流服务（即把大块数据分割成以报文段为单位的数据包）
    1. 基础是滑动窗口协议和连续ARQ协议来保证传输效率，配合着流量控制和拥塞控制
    2. 停止等待协议和自动重传请求(ARQ)：发送完一个分组后，等待确认报文再发送
        A. 未收到确认：采用超时计时器，若长时间未收到确认，则重发
        B. 收到重复分组：丢弃分组并发送确认
    3. 滑动窗口协议和连续ARQ协议（连续ARQ是基于滑动窗口实现）：传输方式
        A. 使用滑动窗口协议，接收方采用累计确认的方式，对按序到达的最后一个分组进行确认
    4. 流量控制（利用可变的窗口大小）（点对点的接收问题，使得接收方来得及接收）
        A. 接收方通过发送seq(序列号),qwnd(窗口大小)，来告知发送方下一次发送的数据量
    5. 拥塞控制（防止过多的数据注入到网络中）
        A. 慢开始和拥塞避免：指数增长，
        B. 拥塞避免：到了门限值以后线性增长
        C. 快重传：（快重传）接受方收到报文就发送确认，当发送方收到三个重复确认当立即重传
            (比如说12345，收到12，缺3，那他回复的应该是333)
        D. 快恢复: 当收到三个重复的确认后，采用快恢复，即门限值除2，然后采用拥塞避免线性增长
        E. 若超时，则直接归零
# 2.TCP建立可靠的连接（连接的三次握手，释放的四次握手）
    0.TCP标志位：SYN(建立联机) ACK(确认)FIN(结束)Seq(顺序号)
                 Acknowledge number(确认号码) PSH(push传送) RST(重置) URG(urgent紧急)
    1.目的：为了防止已失效的连接请求报文段突然又传送到了，因而产生错误
    2.连接握手（请求---应答---确认）：
        A. 客户端发出【连接请求】报文段
            （建立联机syn = 1， 序列号seq = 123）
        B. 服务端收到连接请求报文段后，如同意，则发回【确认连接】的报文
            （ack number = Seq +1 ,syn = 1,ack = 1,seq = 321）
        C. 客户端收到同意连接的报文段后，向服务端给出【确认连接】的报文，并通知上层应用进程，连接已经建立。
            （ack number = seq + 1,ack = 1）
        D. 服务端收到确认后，通知上层，连接已建立
        E. 开始数据传输
    3.释放松手（释放-确认释放-连接关闭-确认关闭）：
        A. 客户端发出【连接释放】报文段，然后停止发送数据，关闭TCP连接，
            （Fin = 1 ,seq = 456）
        B. 服务端发出【确认释放】报文段，通知高层进程，此时TCP处于半关闭，若服务端想发，客户端必需要接受
            (ack number = 456 +1 , seq = 654, ACK = 1)
        C. 服务端发出【连接关闭】报文段
            (Fin = 1 , ACK = 1, seq = 789, ack number = 456 + 1)
        D. 客户端发出【确认】，通知服务端连接已关闭
            (ACK = 1 , seq = 456 + 1, ack = 789 +1)
    4.为什么要四次握手（全双工通信，每个方向都要关闭）
        因为连接时，建立连接的SYN 和 确认号 ACK是一次发送的；
        释放连接时，FIN 和 ACK是两次发送的。因为可能收到连接释放后，可能还有数据要传输，所以先发送ACK确认，
        然后等数据传输完了，再发送Fin告知断开连接。
    5.为什么四次握手后要等待两个MSL
        A.为了最后一个确认能到达服务端，不然服务端未接收到会超时重传
        B.防止以已经失效的连接请求再次到达，使得所有报文段全部消失
    6.为什么不是【两次握手】
        A.假如服务端收到连接请求，然后发送同意，两次握手情况下，连接就已经建立了，这个时候服务端可以开始发送数据。
        但如果网络不可靠，客户端【未收到同意连接】，以为连接未建立，对于发送来的数据是忽略的，更有可能重新发送请求连接报文。导致死锁
        B.假设客户端请求连接的报文，被【阻塞一段时间】后又发送回来了。服务端以为客户端又要连接，就向A确认连接，然后开始等待客户端发送数据，浪费服务器资源
![三次握手](https://pic3.zhimg.com/v2-576b043d12353928eea6e45373655668_r.jpg)
![四次握手](https://pic2.zhimg.com/v2-c8b61ed2a249700583b11bc5d16c5711_r.jpg)
# 3.TCP/UDP的特点和区别
    1.特点（UDP（酥度快，但是质量差）/TCP（质量好，但是速度慢））
        A:UDP【用户数据包协议】是无连接的，尽最大可能交付，没有拥塞控制，面向报文的
            (1) 【无连接的】发送数据之前不需要建立连接，因此减少了开销和发送数据之前的时延。
            (2) 【尽最大努力交付】即不保证可靠交付，因此主机不需要维持复杂的连接状态表。
            (3) 【面向报文的】UDP 对应用层交下来的报文，不做处理，只加首部
            (4) 【没有拥塞控制】因此网络出现的拥塞不会使源主机的发送速率降低。这对某些实时应用是很重要的。很适合多媒体通信的要求。 
            (5) 【多对象的交互】支持一对一、一对多、多对一和多对多的交互通信。
            (6) 【首部开销小】只有 8 个字节，比 TCP 的 20 个字节的首部要短
        B:TCP【传输控制协议】是面向连接的，提供可靠交付，点对点的，有流量控制，拥塞控制，提供全双工通信，面向字节流（将上层的报文再次划分成适合大小的数据块）
    2.TCP/UDP的实际应用
        TCP:电子邮件/远程登录/浏览器/文件传输
        UDP:语音聊天/即时通讯/在线视频
    3.TCP/UDP的首部格式
# 4.打开一个网页后会经历的事
    1. 在浏览器中输入网址； 
    2. 发送至DNS服务器（或者本地缓存）并获得域名对应的WEB服务器的【IP】地址； 
    3. 与WEB服务器建立【TCP连接】； 
    4. 浏览器向WEB服务器的IP地址发送相应的【HTTP请求】； 
    5. WEB服务器【响应请求】并返回指定URL的数据，或错误信息，如果设定重定向，则重定向到新的URL地址。 
    6. 浏览器下载数据后【解析HTML源文件】，解析并渲染显示页面
    7. 分析页面中的超链接并显示在当前页面，重复以上过程直至无超链接需要发送，完成全部显示
# 5.DNS查找IP过程
    1.输入后，先查Host里有没有
    2.没有，查找本地DNS解析缓存
    3.没有，查找本地DNS服务器（若不是服务区域，就查他的缓存）
    4.没有，转发给其他服务器来代查找
# 6.路由器和交换机的区别
    1.交换机于数据链路层，能识别 MAC 地址，根据 MAC 地址转发链路层数据帧。具有自学机制来维护 IP 地址与 MAC 地址的映射。
    2.路由器于网络层，能识别 IP 地址并根据 IP 地址转发分组。维护着路由表，根据路由表选择最佳路线  
